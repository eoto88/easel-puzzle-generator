<script src="http://d3js.org/d3.v3.min.js"></script>

<style>
  body {
    font: 13px sans-serif;
    width: 960px;
    height: 500px;
  }

  circle,
  .line {
    fill: none;
    stroke: steelblue;
    stroke-width: 1.5px;
  }

  circle {
    fill: #fff;
    fill-opacity: .2;
  }

  rect {
    fill: none;
  }
</style>

<body>
</body>

<script>
  var width = 500, height = 500;

  var randomBetween = function(min, max) {
    return Math.random() * (max - min) + min;
  };

  var edgeDistributions = function() {
    var point1 = [0, 0];
    var point2 = [randomBetween(25, 50), randomBetween(-10, 10)];
    var point3 = [randomBetween(0, point2[0]), randomBetween(50, 100)];
    var point4 = [randomBetween(50, 100), randomBetween(50, 100)];
    var point5 = [randomBetween(50, point4[0]), randomBetween(-10, 10)];
    var point6 = [100, 0];

    return [point1, point2, point3, point4, point5, point6].map(function(p) {
      return [p[0] / 100, p[1] / 100];
    });
  };

  var points = edgeDistributions();

  points = points.map(function(p) {
    var x = p[0] * (width - 20) + 10;
    var y = height - (p[1] * (height - 20) + 10);
    return [x, y];
  });

  var line = d3.svg.line().interpolate("basis");

  var svg = d3.select("body").append("svg")
      .attr("width", width)
      .attr("height", height)
      .attr("tabindex", 1);

  svg.append("rect")
      .attr("width", width)
      .attr("height", height)

  svg.append("path")
      .datum(points)
        .attr("class", "line")
        .call(redraw);

  function redraw() {
    svg.select("path").attr("d", line);

    var circle = svg.selectAll("circle")
        .data(points, function(d) { return d; });

    circle.enter().append("circle")
        .attr("r", 1e-6)
      .transition()
        .duration(750)
        .ease("elastic")
        .attr("r", 6.5);

    circle.attr("cx", function(d) { return d[0]; })
        .attr("cy", function(d) { return d[1]; });

    circle.exit().remove();

    if (d3.event) {
      d3.event.preventDefault();
      d3.event.stopPropagation();
    }
  }
</script>
